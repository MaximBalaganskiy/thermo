(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{73:function(t,e,r){"use strict";r.d(e,"a",(function(){return l}));var n=r(3);var o=0,i=1,s=2,u=3,a={maxRetries:3,interval:1e3,strategy:o},c=function(){function t(t){if(this.retryConfig=Object.assign({},a,t||{}),this.retryConfig.strategy===s&&this.retryConfig.interval<=1e3)throw new Error("An interval less than or equal to 1 second is not allowed when using the exponential retry strategy")}return t.prototype.request=function(t){var e=t;return e.retryConfig||(e.retryConfig=Object.assign({},this.retryConfig),e.retryConfig.counter=0),e.retryConfig.requestClone=t.clone(),t},t.prototype.response=function(t,e){return delete e.retryConfig,t},t.prototype.responseError=function(t,e,r){var a=e.retryConfig,c=a.requestClone;return Promise.resolve().then((function(){if(a.counter<a.maxRetries){var p=!a.doRetry||a.doRetry(t,e);return Promise.resolve(p).then((function(p){if(p)return a.counter++,new Promise((function(t){return n.d.global.setTimeout(t,function(t){var e=t.interval,r=t.strategy,n=t.minRandomInterval,a=t.maxRandomInterval,c=t.counter;if("function"==typeof r)return t.strategy(c);switch(r){case o:return f[o](e);case i:return f[i](c,e);case s:return f[s](c,e);case u:return f[u](c,e,n,a);default:throw new Error("Unrecognized retry strategy")}}(a)||0)})).then((function(){var t=c.clone();return"function"==typeof a.beforeRetry?a.beforeRetry(t,r):t})).then((function(t){return r.fetch(Object.assign(t,{retryConfig:a}))}));throw delete e.retryConfig,t}))}throw delete e.retryConfig,t}))},t}();var f=[function(t){return t},function(t,e){return e*t},function(t,e){return 1===t?e:Math.pow(e,t)/1e3},function(t,e,r,n){return void 0===r&&(r=0),void 0===n&&(n=6e4),Math.random()*(n-r)+r}],p=function(){function t(){this.baseUrl="",this.defaults={},this.interceptors=[]}return t.prototype.withBaseUrl=function(t){return this.baseUrl=t,this},t.prototype.withDefaults=function(t){return this.defaults=t,this},t.prototype.withInterceptor=function(t){return this.interceptors.push(t),this},t.prototype.useStandardConfiguration=function(){return Object.assign(this.defaults,{credentials:"same-origin"},this.defaults),this.rejectErrorResponses()},t.prototype.rejectErrorResponses=function(){return this.withInterceptor({response:h})},t.prototype.withRetry=function(t){var e=new c(t);return this.withInterceptor(e)},t}();function h(t){if(!t.ok)throw t;return t}var l=function(){function t(){if(this.activeRequestCount=0,this.isRequesting=!1,this.isConfigured=!1,this.baseUrl="",this.defaults=null,this.interceptors=[],"undefined"==typeof fetch)throw new Error("HttpClient requires a Fetch API implementation, but the current environment doesn't support it. You may need to load a polyfill such as https://github.com/github/fetch")}return t.prototype.configure=function(t){var e;if("object"==typeof t)e={defaults:t};else{if("function"!=typeof t)throw new Error("invalid config");(e=new p).baseUrl=this.baseUrl,e.defaults=Object.assign({},this.defaults),e.interceptors=this.interceptors;var r=t(e);p.prototype.isPrototypeOf(r)&&(e=r)}var n=e.defaults;if(n&&Headers.prototype.isPrototypeOf(n.headers))throw new Error("Default headers must be a plain object.");var o=e.interceptors;if(o&&o.length){if(o.filter((function(t){return c.prototype.isPrototypeOf(t)})).length>1)throw new Error("Only one RetryInterceptor is allowed.");var i=o.findIndex((function(t){return c.prototype.isPrototypeOf(t)}));if(i>=0&&i!==o.length-1)throw new Error("The retry interceptor must be the last interceptor defined.")}return this.baseUrl=e.baseUrl,this.defaults=n,this.interceptors=e.interceptors||[],this.isConfigured=!0,this},t.prototype.fetch=function(t,e){var r=this;!function(t){if(t.isRequesting=!!++t.activeRequestCount,t.isRequesting){var e=n.b.createCustomEvent("aurelia-fetch-client-request-started",{bubbles:!0,cancelable:!0});setTimeout((function(){return n.b.dispatchEvent(e)}),1)}}(this);var o=this.buildRequest(t,e);return function(t,e,r){return g(t,e,"request","requestError",r)}(o,this.interceptors,this).then((function(t){var e=null;if(Response.prototype.isPrototypeOf(t))e=Promise.resolve(t);else{if(!Request.prototype.isPrototypeOf(t))throw new Error("An invalid result was returned by the interceptor chain. Expected a Request or Response instance, but got ["+t+"]");o=t,e=fetch(t)}return function(t,e,r,n){return g(t,e,"response","responseError",r,n)}(e,r.interceptors,o,r)})).then((function(t){return Request.prototype.isPrototypeOf(t)?r.fetch(t):t})).then((function(t){return d(r),t}),(function(t){throw d(r),t}))},t.prototype.buildRequest=function(t,e){var r,n,o,i=this.defaults||{},s=function(t){var e={};for(var r in t||{})t.hasOwnProperty(r)&&(e[r]="function"==typeof t[r]?t[r]():t[r]);return e}(i.headers);if(Request.prototype.isPrototypeOf(t))r=t,o=new Headers(r.headers).get("Content-Type");else{e||(e={});var u=(n=e.body)?{body:n}:null,a=Object.assign({},i,{headers:{}},e,u);o=new Headers(a.headers).get("Content-Type"),r=new Request(function(t,e){if(y.test(e))return e;return(t||"")+e}(this.baseUrl,t),a)}return o||(new Headers(s).has("content-type")?r.headers.set("Content-Type",new Headers(s).get("content-type")):n&&function(t){try{JSON.parse(t)}catch(t){return!1}return!0}(n)&&r.headers.set("Content-Type","application/json")),function(t,e){for(var r in e||{})e.hasOwnProperty(r)&&!t.has(r)&&t.set(r,e[r])}(r.headers,s),n&&Blob.prototype.isPrototypeOf(n)&&n.type&&r.headers.set("Content-Type",n.type),r},t.prototype.get=function(t,e){return this.fetch(t,e)},t.prototype.post=function(t,e,r){return b(this,t,e,r,"POST")},t.prototype.put=function(t,e,r){return b(this,t,e,r,"PUT")},t.prototype.patch=function(t,e,r){return b(this,t,e,r,"PATCH")},t.prototype.delete=function(t,e,r){return b(this,t,e,r,"DELETE")},t}(),y=/^([a-z][a-z0-9+\-.]*:)?\/\//i;function d(t){if(t.isRequesting=!!--t.activeRequestCount,!t.isRequesting){var e=n.b.createCustomEvent("aurelia-fetch-client-requests-drained",{bubbles:!0,cancelable:!0});setTimeout((function(){return n.b.dispatchEvent(e)}),1)}}function g(t,e,r,n){for(var o=[],i=4;i<arguments.length;i++)o[i-4]=arguments[i];return(e||[]).reduce((function(t,e){var i=e[r],s=e[n];return t.then(i&&function(t){return i.call.apply(i,[e,t].concat(o))}||v,s&&function(t){return s.call.apply(s,[e,t].concat(o))}||w)}),Promise.resolve(t))}function v(t){return t}function w(t){throw t}function b(t,e,r,n,o){return n||(n={}),n.method=o,r&&(n.body=r),t.fetch(e,n)}}}]);
//# sourceMappingURL=npm.aurelia-fetch-client.618a94c9475acd411b04.js.map